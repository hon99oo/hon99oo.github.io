I"<h1 id="chapter-04-프로세서-구조">Chapter 04. 프로세서 구조</h1>
<ul>
  <li>4.1 Y86-64 인스트럭션 집합 구조</li>
  <li>4.2 논리 설계와 하드웨어 제어 언어 HCL</li>
  <li>4.3 순차적sequential Y86-64 구현</li>
</ul>

<h1 id="43-순차적sequential-y86-64-구현">4.3 순차적sequential Y86-64 구현</h1>

<ul>
  <li>SEQ : sequential 프로세서를 의미</li>
  <li>매 클럭 사이클에 SEQ는 한 개의 완전한 인스트럭션을 처리하는 데 필요한 모든 단계를 수행한다.</li>
  <li>SEQ를 개발하는 목적은 효율적인 파이프라인 프로세서를 만들려는 우리의 최종목표로 가는 첫 단계이다.</li>
</ul>

<h2 id="434-seq-단계의-구현">4.3.4 SEQ 단계의 구현</h2>

<ul>
  <li>SEQ를 구현하는 데 필요한 제어로직 블록을 위한 HCL작성방법을 설명한다.</li>
  <li>여러가지 인스트럭션 코드, 함수코드, 레지스트 이름, ALU 연산, 상태코드 등을 위한 상수 값뿐만 아니라 여러가지 하드웨어 신호의 이름이 포함된다.</li>
</ul>

<p><br /><br /></p>

<p><img src="../../assets/img/csapp/16/img.png" width="100%" height="100%" /></p>
<ul>
  <li>위의 표는 HCL 문장에 사용된 상수 값들이다.</li>
</ul>

<h3 id="선입-단계">선입 단계</h3>
<p><img src="../../assets/img/csapp/16/img_1.png" width="100%" height="100%" /></p>

<ul>
  <li>선입 단계는 인스트럭션 메모리 하드웨어 유닛을 포함한다.</li>
  <li>유닛은 PC를 첫 바이트(0번 바이트)의 주소로 사용해서 메모리로부터 한 번에 10바이트를 읽어들인다.</li>
  <li>이 바이트는 인스트럭션 바이트로 해석되고, 두 개의 4비트 값으로 나누어진다.(“Split”이라고 표시된 유닛에 의해 icode와 ifun으로 나뉜다.)</li>
  <li>icode 값에 따라 세 개의 1비트 신호를 계산할 수 있다.
    <ul>
      <li>instr_valid: 이 신호는 부정 인스트럭션을 검출하기 위해 사용된다.</li>
      <li>need_regids: 레지스터 지정 바이트를 포함하는가</li>
      <li>need_valC: 상수 워드를 포함하는가</li>
    </ul>
  </li>
  <li>instr_valid, imem_error 신호(인스트럭션 주소가 범위를 벗어날 때 만들어지는)는 메모리 단계에서 상태코드를 만들기 위해 사용된다.</li>
  <li>need_regids를 위한 HCL 표현은 icode 값이 레지스터 지정자 바이트를 갖는 인스트럭션인지를 결정한다.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="n">bool</span> <span class="n">need_regids</span> <span class="o">=</span>
          <span class="n">icode</span> <span class="n">in</span> <span class="o">{</span> <span class="no">IRRMOVQ</span><span class="o">,</span> <span class="no">IOPQ</span><span class="o">,</span> <span class="no">IPUSHQ</span><span class="o">,</span> <span class="no">IPOPQ</span><span class="o">,</span>
                     <span class="no">IIRMOVQ</span><span class="o">,</span> <span class="no">IRMMOVQ</span><span class="o">,</span> <span class="no">IMRMOVQ</span> <span class="o">};</span></code></pre></figure>

<ul>
  <li>인스트럭션 메모리에서 읽은 나머지 바이트는 레지스터 지정자와 상수 워드들이다.
    <ul>
      <li>Align 이라고 이름 붙인 하드웨어 유닛이 레지스터 필드들과 상수 워드에 대해 처리작업을 수행한다.</li>
    </ul>
  </li>
</ul>
:ET